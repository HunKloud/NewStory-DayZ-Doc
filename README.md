# Путеводитель по настройке мода

Здесь вы найдете все основные настройки нашего мода

## Оглавление

+ [Общие форматы заполнения](#общие-форматы-заполнения)
+ [Зоны телепортации при перезаходе](#зоны-телепортации-при-перезаходе)
+ [Настройка верстаков или обмена](#настройка-верстаков-или-обмена)

## Зоны телепортации при перезаходе

Данная настройка не запрещает выход в заданных зонах, она лишь телепортирует игрока в случайную позицию при заходе с выводом уведомления

+ Все файлы находятся по пути: [___NewStory\Configurations\RelogBanOnPositions___](https://github.com/HunKloud/NewStory-DayZ-Doc/tree/main/Server/profiles/NewStory/Configurations/RelogBanOnPositions/)
+ Кроме того все файлы имеют рассширения ___.json___
+ Название файла может быть любым, но желательно что было понятно для какой зоны он сделан
  + Например: ___KordonDungeon.json___

Существует 2 типа зон:

1. В виде прямоугольника
2. В виде сферы

### Прямоугольник

+ __PointMin__ - это левая нижняя координата
+ __PointMax__ - это правая верхняя координата
+ __Positions__ - Список координат, куда будет перемещен игрок при заходе

```json
{
    "PointMin": [ 8813.053711, 68.823990, 1651.510376 ],
    "PointMax": [ 8668.410156, 150.476456, 1797.680054 ],
    "Positions": [
        [ 6423.632813, 80.234993, 1134.679688 ],
        [ 6423.632813, 80.234993, 1134.679688 ]
    ]
}
```

### Сфера

+ __PointMin__ - В данном случае это центр сферы
+ __Radius__ - Это радиус сферы
+ __Positions__ - Список координат, куда будет перемещен игрок при заходе

```json
{
    "PointMin": [ 6317.997559, 92.129951, 731.253906 ],
    "Radius": 100,
    "Positions": [
        [ 6423.632813, 80.234993, 1134.679688 ],
        [ 6423.632813, 80.234993, 1134.679688 ]
    ]
}
```

[Оглавление](#оглавление)

## Настройка верстаков или обмена

### Список возможных рецептов

Данный список является общим как для крафтов, так и обменов у NPC

+ __Name__ - Название рецепта, [поддерживает ключевые слова](#когда-класснейм-предмета-указан-неявно)
+ __Condition__ - Условие при котором игрок сможет использовать данный рецепт
+ __CategoryID__ - ID категории
+ __Results__ - Спосок предметов которые игрок получит после выполнения. [Заполняется по данному принципу](#спавн-нового-предмета)
+ __Request__ - Список требуемых предметов

```json
{
    "Name": "%NS_Weapon_APS.ItemDisplayName%",
    "Condition": "",
    "CategoryID": 2,
    "Results": [],
    "Request": []
}
```

Заполнение списка __Request__

+ __Type__ - класснеймы предметов, которые могут учитываться как один и тот же
+ __Count__ - Сколько предметов требуется того же типа
+ __Location__ - Где именно должен находиться предмет
  + В инвентаре (Значение: __1__)
  + Как прикрепление к верстаку (Значение: __2__)
  > Может быть сразу оба рассположения, тогда значение будет равно __3__
+ __LiquidType__ - [Тип необходимой жидкости](#возможные-типы-жидкости)
    > Если выставлено значение меньше или равное __0__, то не учитывается
+ __MinDamage__ - [Минимальная степень повреждения](#степени-повреждения-предмета)
    > Если выставлено значение меньше __0__, то не учитывается
+ __MaxDamage__ - [Максимальная степень повреждения](#степени-повреждения-предмета)
    > Если выставлено значение меньше __0__, то не учитывается
    > :heavy_exclamation_mark: Степень должна быть больше __MinDamage__
+ __MinQuantity__ - Минимальное значение кол-ва
    > Если выставлено значение меньше __0__, то не учитывается
    >
    > В данную переменную вшито сразу 2 типа заполнения:
    >
    > 1) В процентном соотношении от максимального значенияот (т.е. от 0 до 1)
    > 2) Численное значение (для того что бы учитывался именно этот тип, требуется чтобы значение было быльше 1, т.е. если нам надо что бы у предмета было кол-во в размере 1 ед., то надо указать 2)
    >
+ __MaxQuantity__ - Максимальное значение кол-ва
    > Заполнение аналогично __MinQuantity__
+ __AddHealth__ - Сколько требуется добавить ХП
    > Заполнение аналогично __MinQuantity__, однако если выставлено значение __0__, то не учитывается
+ __AddQuantity__  - Сколько требуется добавить кол-ва
    > Заполнение аналогично __MinQuantity__, однако если выставлено значение __0__, то не учитывается
+ __SetHealth__  - Сколько требуется добавить кол-ва
    > Заполнение аналогично __MinQuantity__, однако если выставлено значение __0__, то не учитывается
+ __Destroy__ - Надоли уничтожить преждмет
    > Если имеет значение __true__ или __1__, то параметры __AddHealth__, __AddQuantity__, __SetHealth__ игнорируются

```json
{
    "Type": [
        "NS_Consumables_WeaponParts"
    ],
    "Count": 1,
    "Location": 1,
    "LiquidType": -1,
    "MinDamage": 1,
    "MaxDamage": -1,
    "MinQuantity": 2,
    "MaxQuantity": -1,
    "AddHealth": 0,
    "AddQuantity": -2,
    "SetHealth": 0,
    "Destroy": false
}
```

#### Особенности при заполнения рецептов для крафта

Для крафта есть только __3__ встроенные категории, никакую другую указать нельзя:

1. Крафт
2. Разбор
3. Ремонт

[Оглавление](#оглавление)

---

## Общие форматы заполнения

+ [Спавн нового предмета](#спавн-нового-предмета)
+ [Замена ключевых слов в тексте](#замена-ключевых-слов-в-тексте)
+ [Возможные типы жидкости](#возможные-типы-жидкости)
+ [Степени повреждения предмета](#степени-повреждения-предмета)

---

### Спавн нового предмета

Зачастую это список спредметов которые надо создать внутри какого-либо контейнера, однако может быть частью какого либо другого списка

+ __Name__ - Класснейм предмета
+ __Health01__ - Кол-во хп у предмета
+ __Health01Max__ - Макс. кол-во ХП у предмета
    > Если этот параметр больше 0, то __Health01__ будет являться Мин. кол-вом и итоговое значение будет составлять случайное значение от __Health01__ до __Health01Max__
    >
    > В данную переменную вшито сразу 2 типа заполнения:
    >
    > 1. В процентном соотношении от максимального значенияот (т.е. от 0 до 1)
    > 2. Численное значение (для того что бы учитывался именно этот тип, требуется чтобы значение было быльше 1, т.е. если нам надо что бы у предмета было кол-во в размере 1 ед., то надо указать 2)

+ __Quantity01__ - Кол-во у предмета (Шкала заполнения или значение стака)
+ __Quantity01Max__ - Макс. кол-во у предмета
    > Принцип работы аналогичен __Health01Max__
+ __Attachments__ - Список того, что будет спавниться в инвентаре (На самом деле надо было назвать переменную по другому, но уже поздно)

Примеры:

```json
{
    "Name": "Ammo_12gaPellets",
    "Health01": 1,
    "Health01Max": 0,
    "Quantity01": 1,
    "Quantity01Max": 0,
    "Attachments": []
}
```

```json
{
    "Name": "AK74",
    "Health01": 1,
    "Quantity01": 1,
    "Attachments": [
        {
            "Name": "AK74_WoodBttstck",
            "Health01": 1,
            "Quantity01": 1
        },
        {
            "Name": "AK74_Hndgrd",
            "Health01": 1,
            "Quantity01": 1
        },
        {
            "Name": "PSO1Optic",
            "Health01": 1,
            "Quantity01": 1,
            "Attachments": [
                {
                    "Name": "Battery9V",
                    "Health01": 1,
                    "Quantity01": 1
                }
            ]
        },
        {
            "Name": "AK_Bayonet",
            "Health01": 1,
            "Quantity01": 1
        },
        {
            "Name": "Mag_AK74_30Rnd",
            "Health01": 1,
            "Quantity01": 1
        }
    ]
}
```

> :heavy_exclamation_mark: В последнем примере такие переменные как __Health01Max__ и __Quantity01Max__ не указаны, т.к. по стандарту они имеют значение __0__
>
[Оглавление](#оглавление)

---

### Замена ключевых слов в тексте

Замена бывает 2х типов:

1. #### Когда класснейм предмета уже был указан

    > В данном случае подразумевается, что класснейм будет браться от некого базового предмета, который уже был так или иначе указан
    > Форма записи в данном случае будет выглядеть так: __%ItemDisplayName%__

2. #### Когда класснейм предмета указан неявно

    > Здесь может быть почти любой текст за исключением текста, где уже используется другой тип ключевых слов
    > Форма записи в данном случае будет выглядеть так: __%NS_Weapon_APS.ItemDisplayName%__

Возможные ключевые слова:

+ __ItemDisplayName__ - Имя предмета
+ __ItemDescriptionShort__ - Описание предмета
+ __ItemHealth__ - Максимальное значение ХП у предмета
+ __ItemSize__ - Размер занимаемого места предметов в инвентаре (Например: 2x3)

[Оглавление](#оглавление)

---

### Возможные типы жидкости

#### Оригинальные

| Тип жидкости | Значение |
|----------------|---------|
| Кровь (0+) | 1 |
| Кровь (0-) | 2 |
| Кровь (A+) | 4 |
| Кровь (A-) | 8 |
| Кровь (B+) | 16 |
| Кровь (B-) | 32 |
| Кровь (AB+) | 64 |
| Кровь (AB-) | 128 |
| Физраствор | 256 |
| Вода | 512 |
| Речьная вода | 1024 |
| Водка | 2048 |
| Пиво | 4096 |
| Бензин | 8192 |
| Дизель | 16384 |
| Дезинфектант | 32768 |

#### Из нашего мода

| Тип жидкости | Значение |
|----------------|---------|
| Кислород | 131072 |

[Оглавление](#оглавление)

### Степени повреждения предмета

| Повреждение | Значение | Пороговое значение |
|-------------------|---|-----|
| НЕТРОНУТО         | 0 | 1.0 |
| ПОНОШЕНО          | 1 | 0.7 |
| ПОВРЕЖДЕНО        | 2 | 0.5 |
| СИЛЬНО ПОВРЕЖДЕНО | 3 | 0.3 |
| УНИЧТОЖЕНО        | 4 | 0.0 |
